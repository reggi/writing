# Headless JavaScript Testing

There's two types of JavaScript in the world, those meant for the browser and those meant for the terminal.

I would love to get the console.logs that the browser receives, but within the terminal. This would not only save me time (from creating a HTML file, running a server, opening a browser), it would also allow for cool things like automatic testing before deployment. I just want a simple and easy way to run browser-based JavaScript in the terminal, and get the console outputs.

I created one using `jsdom` with help from [@domenic and @Sebmaster](https://github.com/tmpvar/jsdom/pull/991#issuecomment-76562375).

```
var fs = require("fs")
var jsdom = require("jsdom")
var argv = require('minimist')(process.argv.slice(2));
var file = argv._[0]
var contents = fs.readFileSync(file)

var doc = jsdom.jsdom('<html><body></body></body>')
var window = doc.defaultView;

jsdom.getVirtualConsole(window).sendTo(console);

var scriptEl = window.document.createElement("script");
scriptEl.text = contents;
window.document.body.appendChild(scriptEl);
```

and another with PhantomJS with help from [stackoverflow: Headless Browserify JavaScript Testing with Phantom.js](http://stackoverflow.com/questions/28788253/headless-browserify-javascript-testing-with-phantom-js)

```
var system = require("system")
var webPage = require('webpage')
var page = require('webpage').create()

phantom.onError = function(msg, trace) {

};

page.onError = function(msg, trace) {

};

page.onConsoleMessage = function(msg, lineNum, sourceId) {
  console.log('CONSOLE: ' + msg + ' (from line #' + lineNum + ' in "' + sourceId + '")');
}

var fs = require("fs")
var content = fs.read(system.args[1])
page.content = '<html><body><script type="text/javascript">'+content+'</script></body></html>'


phantom.exit();
```

Both didn't work exactly as I wanted. I really wanted to be able to test scripts generated by browserify in my polymer project. 

Especially [here where i'm making an html file via command](https://github.com/reggi/demo-browserify-polymer-es6/blob/master/package.json#L11). 


